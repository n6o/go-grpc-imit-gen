# go-grpc-imit-gen
gRPC imitation service generator for golang, based off of [Moq](https://github.com/matryer/moq).
This tool requires go code generated by protoc.

## Installation

```
$ go install github.com/n6o/go-grpc-imit-gen@latest
```

## Usage

[Example is here](./example).

### Prepare 'repo' file

```
//go:generate go-grpc-imit-gen --repo=$GOFILE --dstDir=../imit/

package gen

import (
	_ "google.golang.org/genproto/googleapis/pubsub/v1"
	_ "google.golang.org/genproto/googleapis/spanner/v1"
)
```

### Generate imitations

```
$ cd ./example
$ go mod tidy
$ go generate ./gen
```

## Note

- I confirmed only Unary RPC that imitations works.
    - Not confirmed other kinds.
